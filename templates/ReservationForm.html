{% extends "Layout.html" %}
{% block content %}
    <h1>Make Reservation</h1>

    <form class="form form-50" action="{{ action }}" method="post">
      <input type="hidden" name="reservation" id="reservation" value="{{ field.reservation }}">
      <fieldset class="form__fieldset">
        <legend class="form__legend">Travel Dates</legend>

        <label class="form__label" for="departuredate">Departure Date</label>
        {% if errors.departuredate %}
          <span class="form__error">{{ errors.departuredate }}</span>
        {% endif %}
        <input class="form__input" type="date" id="departuredate" name="departuredate"
                value="{{ field.departuredate ? field.departuredate|date('Y-m-d') : 'now'|date('Y-m-d') }}" required>

        <label class="form__label" for="returndate">Return Date</label>
        {% if errors.returndate %}
          <span class="form__error">{{ errors.returndate }}</span>
        {% endif %}
        <input class="form__input" type="date" id="returndate" name="returndate"
                value="{{ field.returndate ? field.returndate|date('Y-m-d') : 'now'|date('Y-m-d') }}" required>

      </fieldset>

      <fieldset class="form__fieldset">
        <legend class="form__legend">Select Vehicle</legend>

        <table class='form__table'>
        <thead>
          <tr class="form__table-row">
            <th>Vehicle</th>
            <th>Type</th>
            <th>Seats</th>
            <th>Rate</th>
            <th>Select</th>
          </tr>
        </thead>
        <tbody id="vehicle-selection">
          {% if errors.vehicle %}
              <tr>
                <td class="form__error">{{ errors.vehicle }}</td>
              </tr>
          {% endif %}

          {{ include('VehicleSelectionList.html', {vid: field.vehicle, vehicles: field.vehicles, seats: field.requiredseats }, with_context = false) }}
        </tbody>
        </table>

      </fieldset>

      <fieldset class="form__fieldset">
        <legend class="form__legend">Destination</legend>
        <label class="form__label" for="postcode">Post Code</label>
        {% if errors.postcode %}
          <span class="form__error">{{ errors.postcode }}</span>
        {% endif %}
        <input class="form__input" type="text"
               name="postcode" id="postcode"
               value="{{ field.postcode ? field.postcode : '' }}" required>
      </fieldset>

      <button class="form__button">Confirm</button>
    </form>

<script src='/js/ajax.js'></script>
<script src='/js/reservation.js'></script>

{% endblock %}